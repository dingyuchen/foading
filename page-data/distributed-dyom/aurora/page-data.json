{"componentChunkName":"component---node-modules-gatsby-theme-garden-src-templates-local-file-js","path":"/distributed-dyom/aurora","result":{"data":{"file":{"childMdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"aurora\"\n  }, \"Aurora\"), mdx(\"h2\", {\n    \"id\": \"introduction\"\n  }, \"Introduction\"), mdx(\"p\", null, \"Aurora is a relational database service for OLTP workloads offered as part of AmazonWeb Services.\"), mdx(\"p\", null, \"Checkpointing and dirty page writing can reduce the penalty of blocking reads.\"), mdx(\"p\", null, \"dirty page writing\\n: writing into a cache, that only becomes reflected on persistent storage when the buffer is flushed.\"), mdx(\"p\", null, \"Transaction commits are intolerant of failure.\\nThey are also high latency, as high scale systems are distributed across multiple data centers.\\n(140ms for nodes across the ocean)\"), mdx(\"h3\", {\n    \"id\": \"core-idea\"\n  }, \"Core idea\"), mdx(\"p\", null, \"Redo log (something similar to write-ahead logs)\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"protect the database from performance variance and transient or permanent failures at either the networking or storage tiers.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"By only writing redo log records to storage, we are able to reduce network IOPS by an order of magnitude.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Move some of the most complex and critical functions (backup and redo recovery) from one-time expensive operations in the database engine to continuous asynchronous operations amortized across a large distributed fleet.\")), mdx(\"h2\", {\n    \"id\": \"durability-at-scale\"\n  }, \"Durability at scale\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Data, once written, can be read.\")), mdx(\"h3\", {\n    \"id\": \"replication\"\n  }, \"Replication\"), mdx(\"p\", null, \"Nodes need to be replicated on some level to achieve resiliency to failure.\"), mdx(\"p\", null, \"Quorum must obey 2 rules\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Each read must be aware of the most recent write.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Each write must be aware of the most recent write to avoid conflicting writes.\")), mdx(\"p\", null, \"Availability Zone (AZ) is a subset of a Region that is connected to other AZs in the region through low latency links but is isolated for most faults, including power, networking, software deployments, flooding, etc.\"), mdx(\"p\", null, \"Quorums need to tolerate an AZ failure as well as concurrently occurring background noise failures.\"), mdx(\"p\", null, \"Chosen design point of tolerating\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"losing an entire AZ and one additional node (AZ + 1) without losing data, \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"and losing an entire AZ without impacting the ability to write data.\")), mdx(\"p\", null, \"Ensuring read quorum enables us to rebuild write quorum by adding additional replica copies.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Can still achieve healing from a 3-node failure.\")), mdx(\"p\", null, \"Partition the database volume into small fixed size segments, each replicated into Protection Groups (PG).\"), mdx(\"p\", null, \"Segments are now our unit of independent of background noise failure and repair\\nWe would eed to see two such failures in the same 10 second window plus a failure of an AZ not containing either of these two independent failures to lose quorum.\"), mdx(\"h3\", {\n    \"id\": \"operational-advantages-of-resilience\"\n  }, \"Operational Advantages of Resilience\"), mdx(\"p\", null, \"Treat nodes as \\\"bad\\\" and make use of repair mechanism.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"This allows us to use agile methodologies and rapid deployments in our storage service.\")), mdx(\"h2\", {\n    \"id\": \"the-log-is-the-database\"\n  }, \"The Log is the Database\"), mdx(\"p\", null, \"Model of 6 ways segmentation and 4/6 quorum results in untenable performance for a traditional database like MySQL that generates many different actual I/Os for each application write.\"), mdx(\"p\", null, \"Types of data that the engine needs to write:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The redo logs\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Binary (statement) log that is archived to S# in order to support point-in-time restores \"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"The modified data pages\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Seoncd temporary write of the data page (double-write) to prevent torn pages\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Metadata (FRM) files\")), mdx(\"p\", null, \"Durable redo record application happens at the storage tier, continuously, asynchronously, and distributed across the fleet.\\nAny read request for a data page may require some redo records to be applied if the page is not current.\\nCrash recovery is spread across all normal foreground processing.\"));\n}\n;\nMDXContent.isMDXComponent = true;","outboundReferences":[],"inboundReferences":[{"__typename":"Mdx","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"distributed-systems\"\n  }, \"Distributed Systems\"), mdx(\"p\", null, \"#entry\"), mdx(\"h2\", {\n    \"id\": \"table-of-contents\"\n  }, \"Table of Contents\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"MapReduce\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"[\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"gfs\",\n    \"title\": \"Google File System\"\n  }, \"gfs\"), \"] - Google File System\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Raft\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"[\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"spinnaker\",\n    \"title\": \"Spinnaker\"\n  }, \"spinnaker\"), \"]\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"[\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"aurora\",\n    \"title\": \"Aurora\"\n  }, \"aurora\"), \"]\")), mdx(\"p\", null, \"[\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"crdt\",\n    \"title\": \"Convergent and Commutative Replicated Data Types\"\n  }, \"crdt\"), \"]\"));\n}\n;\nMDXContent.isMDXComponent = true;","parent":{"__typename":"File","id":"14f7242e-6dbb-57e6-81a6-d73cb80db295","fields":{"slug":"/distributed-dyom/distributed-dyom","title":"Distributed Systems"}}}]},"fields":{"slug":"/distributed-dyom/aurora","title":"Aurora"}}},"pageContext":{"id":"68843cbe-51c8-5cac-9219-4fbf5948e189"}},"staticQueryHashes":["2098632890","2221750479","2468095761"]}